/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	// Generated by CoffeeScript 1.9.3
	(function() {
	  var container, div, div1, div2, escape_fullscreen, flag, go_fullscreen, offset, root, update_dimensions;

	  root = __webpack_require__(1);

	  root.width = void 0;

	  root.height = void 0;

	  flag = false;

	  offset = 1500 - window.innerWidth;

	  (function($) {
	    $.fn.dragabble = function(opt) {
	      var $el;
	      var $el, set_offset, set_x;
	      opt = $.extend({
	        handle: '',
	        cursor: 'move'
	      }, opt);
	      if (opt.handle === '') {
	        $el = this;
	      } else {
	        $el = this.find(opt.handle);
	      }
	      set_x = void 0;
	      set_offset = void 0;
	      return $el.css('cursor', opt.cursor).on('mousedown', function(e) {
	        var $drag;
	        flag = true;
	        $drag = $el;
	        set_x = e.pageX;
	        set_offset = $(this).offset().left;
	        e.preventDefault();
	      }).on('mousemove', function(e) {
	        var g, keypress, p, q;
	        if (flag === true) {
	          g = set_offset + (e.pageX - set_x) * 2;
	          g = Math.floor(g);
	          keypress = void 0;
	          if (e.pageX > set_x) {
	            keypress = 1;
	          } else {
	            keypress = 2;
	          }
	          set_offset = g;
	          set_x = e.pageX;
	          $(this).offset({
	            left: g
	          });
	          p = Math.floor($(this).offset().left);
	          if (keypress === 1) {
	            if (Math.abs(p) % 1500 <= 200) {
	              if (Math.abs(p) % 3000 <= 200) {
	                q = $('#screen1').offset().left - p;
	                $('#screen2').offset({
	                  left: q - 1500 + p
	                });
	              } else {
	                q = $('#screen2').offset().left - p;
	                $('#screen1').offset({
	                  left: q - 1500 + p
	                });
	              }
	            }
	          } else {
	            p = p + offset;
	            if (Math.abs(p) % 1500 <= 200) {
	              if (Math.abs(p) % 3000 <= 200) {
	                p = p - offset;
	                q = $('#screen1').offset().left - p;
	                $('#screen2').offset({
	                  left: q + 1500 + p
	                });
	              } else {
	                p = p - offset;
	                q = $('#screen2').offset().left - p;
	                $('#screen1').offset({
	                  left: q + 1500 + p
	                });
	              }
	            }
	          }
	        }
	      }).on('mouseup', function() {
	        flag = false;
	      }).on('keydown', function(e) {
	        var hotspots, i, keypressed, num_hotspots, p, q;
	        keypressed = e.keyCode;
	        p = $(this).offset().left;
	        if (keypressed === 38) {
	          hotspots = $(this).find(".hotspot");
	          num_hotspots = hotspots.length;
	          i = 0;
	          while (i < num_hotspots) {
	            if ($(hotspots[i]).offset().left > 200 && $(hotspots[i]).offset().left < 300) {
	              $(hotspots[i]).trigger('click');
	              return;
	            }
	            i++;
	          }
	        } else if (keypressed === 37) {
	          $(this).offset({
	            left: p - 10
	          });
	          p = $(this).offset().left;
	          p = p + offset;
	          if (Math.abs(p) % 1500 <= 200) {
	            if (Math.abs(p) % 3000 <= 200) {
	              p = p - offset;
	              q = $('#screen1').offset().left - p;
	              $('#screen2').offset({
	                left: q + 1500 + p
	              });
	            } else {
	              p = p - offset;
	              q = $('#screen2').offset().left - p;
	              $('#screen1').offset({
	                left: q + 1500 + p
	              });
	            }
	          }
	        } else if (keypressed === 39) {
	          $(this).offset({
	            left: p + 10
	          });
	          if (Math.abs(p) % 1500 <= 200) {
	            if (Math.abs(p) % 3000 <= 200) {
	              q = $('#screen1').offset().left - p;
	              $('#screen2').offset({
	                left: q - 1500 + p
	              });
	            } else {
	              q = $('#screen2').offset().left - p;
	              $('#screen1').offset({
	                left: q - 1500 + p
	              });
	            }
	          }
	        } else if (keypressed === 27) {
	          escape_fullscreen();
	        }
	      }).on('click', function(e) {
	        $(this).focus();
	      });
	    };
	  })(jQuery);

	  update_dimensions = function() {
	    var i, num_annotations, num_hotspots;
	    $("#" + DirectPano.pano_div_id).css({
	      width: root.width,
	      height: root.height
	    });
	    $("#screen1").css({
	      height: root.height
	    });
	    $("#screen2").css({
	      height: root.height
	    });
	    $("#screen2").offset({
	      top: 0,
	      left: -1500
	    });
	    $("#image-screen1_" + root.pano.pano_id).css({
	      height: root.height + 30
	    });
	    $("#image-screen2_" + root.pano.pano_id).css({
	      height: root.height + 30
	    });
	    num_hotspots = root.hotspot_angles[root.hotspot.pano_id].length;
	    i = 0;
	    while (i < num_hotspots) {
	      $("#hotspot_" + i + "_0").css({
	        top: root.height / 2
	      });
	      $("#hotspot_" + i + "_1").css({
	        top: root.height / 2
	      });
	      i++;
	    }
	    num_annotations = root.annotation_angles[root.annotation.pano_id].length;
	    i = 0;
	    while (i < num_annotations) {
	      offset = root.annotation_angles[root.annotation.pano_id][i][1];
	      $("#annotation_1_" + i).css({
	        top: root.height / 2 - 2 * offset
	      });
	      $("#annotation_2_" + i).css({
	        top: root.height / 2 - 2 * offset
	      });
	      i++;
	    }
	  };

	  go_fullscreen = function() {
	    root.width = window.innerWidth;
	    root.height = window.innerHeight;
	    $('#' + DirectPano.image_div_id).css({
	      'visibility': 'hidden'
	    });
	    update_dimensions();
	  };

	  escape_fullscreen = function() {
	    root.width = DirectPano.initial_width;
	    root.height = DirectPano.initial_height;
	    $('#' + DirectPano.image_div_id).css({
	      'visibility': 'visible'
	    });
	    update_dimensions();
	  };

	  $('#' + DirectPano.image_div_id).bind('touchstart click', function() {
	    go_fullscreen();
	  });

	  container = $("#" + DirectPano.pano_div_id);

	  container.css("overflow", "hidden");

	  root.width = DirectPano.initial_width;

	  root.height = DirectPano.initial_height;

	  container.css({
	    'width': root.width,
	    'height': root.height
	  });

	  div = $("<div></div>", {
	    id: "drag",
	    tabindex: 0
	  });

	  div.width(window.innerWidth).height(window.innerHeight);

	  div1 = $("<div></div>", {
	    id: "screen1"
	  });

	  div2 = $("<div></div>", {
	    id: "screen2"
	  });

	  div1.css({
	    "width": "1500px",
	    "height": root.height
	  });

	  div2.css({
	    "width": "1500px",
	    "height": root.height
	  });

	  div.append(div1);

	  div.append(div2);

	  container.append(div);

	  DirectPano.show_fallback_pano = function() {
	    $("#drag").offset({
	      left: 0
	    });
	    root.hotspot_angles = DirectPano.hotspots_angle;
	    root.hotspot_text = DirectPano.hotspot_text;
	    root.annotation_angles = DirectPano.annotation_angles;
	    root.pano = new root.Pano(0);
	    root.pano.load_pano().done(function() {
	      $(document).ready(function() {
	        $("#image-screen1_0").fadeTo(3000, 1);
	        $("#image-screen2_0").fadeTo(3000, 1, function() {
	          root.hotspot = new root.Hotspot(0);
	          root.hotspot.add_hotspots();
	          root.annotation = new root.Annotation(0);
	          root.annotation.add_annotations();
	        });
	      });
	    });
	    div2.offset({
	      top: 0,
	      left: -1500
	    });
	    div.dragabble();
	  };

	  DirectPano.remove_fallback_pano = function() {
	    var error;
	    try {
	      root.transition.destroy_transition();
	      root.transition = null;
	    } catch (_error) {
	      error = _error;
	      root.transition = null;
	    }
	    try {
	      root.hotspot.remove_hotspots();
	      root.hotspot = null;
	    } catch (_error) {
	      error = _error;
	      root.hotspot = null;
	    }
	    try {
	      root.annotation.remove_annotations();
	      root.annotation = null;
	    } catch (_error) {
	      error = _error;
	      root.annotation = null;
	    }
	    try {
	      root.pano.remove_pano();
	      root.pano = null;
	    } catch (_error) {
	      error = _error;
	      root.pano = null;
	    }
	  };

	}).call(this);


/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	// Generated by CoffeeScript 1.9.3
	(function() {
	  var Transition, pano, root;

	  root = __webpack_require__(2);

	  pano = void 0;

	  Transition = (function() {
	    function Transition(old_id, new_id) {
	      var change_opacity;
	      this.destroy = false;
	      this.old_id = old_id;
	      this.new_id = new_id;
	      root.hotspot.remove_hotspots();
	      root.hotspot = null;
	      root.annotation.remove_annotations();
	      root.annotation = null;
	      pano = new root.Pano(new_id);
	      if (this.destroy) {
	        return;
	      }
	      change_opacity = this.change_opacity.bind(this);
	      pano.load_pano().done(function() {
	        change_opacity();
	      });
	      return;
	    }

	    Transition.prototype.change_opacity = function() {
	      var complete, time;
	      if (this.destroy) {
	        return;
	      }
	      time = 3000;
	      complete = this.complete.bind(this);
	      $("#image-screen1_" + this.old_id).fadeTo(time, 0);
	      $("#image-screen2_" + this.old_id).fadeTo(time, 0);
	      $("#image-screen1_" + this.new_id).fadeTo(time, 1);
	      $("#image-screen2_" + this.new_id).fadeTo(time, 1, function() {
	        complete();
	      });
	    };

	    Transition.prototype.complete = function() {
	      var new_id;
	      root.pano.remove_pano();
	      root.pano = null;
	      new_id = this.new_id;
	      if (this.destroy) {
	        return;
	      }
	      console.log(this.destroy);
	      root.pano = pano;
	      root.hotspot = new root.Hotspot(new_id);
	      root.hotspot.add_hotspots();
	      root.annotation = new root.Annotation(new_id);
	      root.annotation.add_annotations();
	    };

	    Transition.prototype.destroy_transition = function() {
	      this.destroy = true;
	      console.log(this.destroy);
	      $("#image-screen1_" + this.old_id).stop();
	      $("#image-screen2_" + this.old_id).stop();
	      $("#image-screen1_" + this.new_id).stop();
	      $("#image-screen2_" + this.new_id).stop();
	      root.pano.remove_pano();
	      pano.remove_pano();
	      return root.pano = null;
	    };

	    return Transition;

	  })();

	  root.Transition = Transition;

	  module.exports = root;

	}).call(this);


/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	// Generated by CoffeeScript 1.9.3
	(function() {
	  var Annotation, root;

	  root = __webpack_require__(3);

	  Annotation = (function() {
	    function Annotation(pano_id) {
	      this.pano_id = pano_id;
	      this.length = void 0;
	    }

	    Annotation.prototype.add_annotation = function(annotation_id, top, left) {
	      var anno_div1, anno_div2, anno_id, div1, div2, pano_id;
	      div1 = $("#screen1");
	      div2 = $("#screen2");
	      pano_id = this.pano_id;
	      anno_id = annotation_id;
	      annotation_id = "annotation_1_" + anno_id;
	      anno_div1 = $("<div></div>", {
	        id: annotation_id
	      });
	      anno_div1.prepend("<img class='annotation' height='40px' width='40px' src='../test/images/info.png'></img> <div class='hotspot-title'> <div class='hotspot-text'>" + root.annotation_angles[pano_id][anno_id][2] + "</div> </div> <div class='info-hotspot'>" + root.annotation_angles[pano_id][anno_id][3] + "</div>");
	      anno_div1.on('click', function() {
	        if (anno_div1.find('.info-hotspot').css('visibility') === 'visible') {
	          anno_div1.find('.info-hotspot').css('visibility', 'hidden');
	        } else {
	          anno_div1.find('.info-hotspot').css('visibility', 'visible');
	        }
	      });
	      anno_div1.css('display', 'inline');
	      anno_div1.css('position', 'absolute');
	      anno_div1.css('left', left);
	      anno_div1.css('top', top);
	      anno_div1.css({
	        'font-family': "'Helvetica Neue', Helvetica, Arial, sans-serif"
	      });
	      anno_div1.css('font-size', '16px');
	      div1.append(anno_div1);
	      annotation_id = "annotation_2_" + anno_id;
	      anno_div2 = $("<div></div>", {
	        id: annotation_id
	      });
	      anno_div2.prepend("<img class='annotation' height='40px' width='40px' src='../test/images/info.png'></img> <div class='hotspot-title'> <div class='hotspot-text'>" + root.annotation_angles[pano_id][anno_id][2] + "</div> </div> <div class='info-hotspot'>" + root.annotation_angles[pano_id][anno_id][3] + "</div>");
	      anno_div2.on('click', function() {
	        if (anno_div2.find('.info-hotspot').css('visibility') === 'visible') {
	          anno_div2.find('.info-hotspot').css('visibility', 'hidden');
	        } else {
	          anno_div2.find('.info-hotspot').css('visibility', 'visible');
	        }
	      });
	      anno_div2.css('display', 'inline');
	      anno_div2.css('position', 'absolute');
	      anno_div2.css('left', left);
	      anno_div2.css('top', top);
	      anno_div2.css({
	        'font-family': "'Helvetica Neue', Helvetica, Arial, sans-serif"
	      });
	      anno_div2.css('font-size', '16px');
	      div2.append(anno_div2);
	    };

	    Annotation.prototype.add_annotations = function() {
	      var angle, i, left, pano_id, top;
	      pano_id = this.pano_id;
	      this.length = root.annotation_angles[pano_id].length;
	      i = 0;
	      while (i < this.length) {
	        top = (root.height / 2 - 2 * root.annotation_angles[pano_id][i][1]) + 'px';
	        console.log(root.annotation_angles[pano_id][i][1], top);
	        angle = (root.annotation_angles[pano_id][i][0] + 80) % 360;
	        left = ((angle / 360) * 1500) + 'px';
	        this.add_annotation(i, top, left);
	        i++;
	      }
	    };

	    Annotation.prototype.remove_annotations = function() {
	      var i;
	      i = 0;
	      while (i < this.length) {
	        $("#annotation_1_" + i).off();
	        $("#annotation_2_" + i).off();
	        $("#annotation_1_" + i).remove();
	        $("#annotation_2_" + i).remove();
	        i++;
	      }
	    };

	    return Annotation;

	  })();

	  root.Annotation = Annotation;

	  module.exports = root;

	}).call(this);


/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	// Generated by CoffeeScript 1.9.3
	(function() {
	  var Hotspot, root;

	  root = __webpack_require__(4);

	  Hotspot = (function() {
	    function Hotspot(pano_id) {
	      this.pano_id = pano_id;
	    }

	    Hotspot.prototype.add_hotspot = function(left, top, i, div1, div2) {
	      var hotspot, hotspot_annotation1, hotspot_annotation2, hotspot_div1, hotspot_div2, new_id, old_id;
	      old_id = this.pano_id;
	      new_id = root.hotspot_angles[old_id][i][0];
	      hotspot_div1 = $("<div></div>", {
	        id: "hotspot_" + i + "_0",
	        "class": "hotspot"
	      });
	      hotspot = $("<img  src='../test/images/logo.png' id='hotspot_" + i + "_0'/>");
	      hotspot.css('height', '50');
	      hotspot.css('width', '50');
	      hotspot_annotation1 = $("<p>" + root.hotspot_angles[old_id][i][3] + "</p>");
	      hotspot_annotation1.css('color', 'Yellow');
	      hotspot_div1.prepend(hotspot);
	      hotspot_div1.append(hotspot_annotation1);
	      hotspot_div1.on('click', function() {
	        root.transition = new root.Transition(old_id, new_id);
	      });
	      div1.append(hotspot_div1);
	      hotspot_div2 = $("<div></div>", {
	        id: "hotspot_" + i + "_1",
	        "class": "hotspot"
	      });
	      hotspot = $("<img  src='../test/images/logo.png' id='hotspot_" + i + "_1'/>");
	      hotspot.css('height', '50');
	      hotspot.css('width', '50');
	      hotspot_annotation2 = $("<p>" + root.hotspot_angles[old_id][i][3] + "</p>");
	      hotspot_annotation2.css('color', 'Yellow');
	      hotspot_div2.append(hotspot);
	      hotspot_div2.append(hotspot_annotation2);
	      hotspot_div2.on('click', function() {
	        root.transition = new root.Transition(old_id, new_id);
	      });
	      div2.append(hotspot_div2);
	      $("#hotspot_" + i + "_0").css('position', 'absolute');
	      $("#hotspot_" + i + "_0").css('left', left);
	      $("#hotspot_" + i + "_0").css('top', top);
	      $("#hotspot_" + i + "_1").css('position', 'absolute');
	      $("#hotspot_" + i + "_1").css('left', left);
	      $("#hotspot_" + i + "_1").css('top', top);
	    };

	    Hotspot.prototype.add_hotspots = function() {
	      var angle, i, img1, img2, left, num_hotspots, pano_id, top;
	      pano_id = this.pano_id;
	      num_hotspots = root.hotspot_angles[pano_id].length;
	      img1 = $("#screen1");
	      img2 = $("#screen2");
	      i = 0;
	      while (i < num_hotspots) {
	        angle = (root.hotspot_angles[pano_id][i][1] + 85) % 360;
	        left = ((angle / 360) * 1500) + 'px';
	        top = root.height / 2 + 'px';
	        this.add_hotspot(left, top, i, img1, img2);
	        i++;
	      }
	    };

	    Hotspot.prototype.remove_hotspots = function() {
	      var i, num_hotspots, pano_id;
	      $(".hotspot").remove();
	      i = 0;
	      pano_id = this.pano_id;
	      num_hotspots = root.hotspot_angles[pano_id].length;
	      while (i < num_hotspots) {
	        $("#hotspot_" + i + "_0").off();
	        $("#hotspot_" + i + "_1").off();
	        i++;
	      }
	    };

	    return Hotspot;

	  })();

	  root.Hotspot = Hotspot;

	  module.exports = root;

	}).call(this);


/***/ },
/* 4 */
/***/ function(module, exports) {

	// Generated by CoffeeScript 1.9.3
	(function() {
	  var Pano, root;

	  root = {};

	  Pano = (function() {
	    function Pano(pano_id) {
	      this.pano_id = pano_id;
	    }

	    Pano.prototype.load_pano = function() {
	      var dfrd, div1, div2, img1, img2, img_width, pano_id, path;
	      pano_id = this.pano_id;
	      img1 = $('<img/>', {
	        id: "image-screen1_" + pano_id
	      });
	      img2 = $('<img/>', {
	        id: "image-screen2_" + pano_id
	      });
	      img_width = root.height + 30;
	      img1.css({
	        "width": "1500px",
	        "height": img_width
	      });
	      img2.css({
	        "width": "1500px",
	        "height": img_width
	      });
	      img1.css("position", "absolute");
	      img1.css("left", "0px");
	      img1.css("top", "0px");
	      img1.css("opacity", "0");
	      img2.css("position", "absolute");
	      img2.css("left", "0px");
	      img2.css("top", "0px");
	      img2.css("opacity", "0");
	      console.log(DirectPano.fallback_pano);
	      path = DirectPano.fallback_pano[pano_id] + (pano_id + 1) + ".jpg";
	      console.log(path);
	      img1.attr("src", path);
	      img2.attr("src", path);
	      div1 = $("#screen1");
	      div1.append(img1);
	      div2 = $("#screen2");
	      div2.append(img2);
	      dfrd = [];
	      dfrd[0] = $.Deferred();
	      dfrd[1] = $.Deferred();
	      img1.on("load", function() {
	        img1.off();
	        dfrd[0].resolve();
	      });
	      img2.on("load", function() {
	        img2.off();
	        dfrd[1].resolve();
	      });
	      return $.when(dfrd[0], dfrd[1]).done(function() {}).promise();
	    };

	    Pano.prototype.remove_pano = function() {
	      $("#image-screen1_" + this.pano_id).remove();
	      return $("#image-screen2_" + this.pano_id).remove();
	    };

	    return Pano;

	  })();

	  root.Pano = Pano;

	  module.exports = root;

	}).call(this);


/***/ }
/******/ ]);